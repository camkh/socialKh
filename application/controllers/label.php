<?php if (!defined('BASEPATH'))    exit('No direct script access allowed');class Label extends CI_Controller{    public function __construct()    {        parent::__construct();        $this->load->model('Mod_post');        $this->load->library(array('tables/Faclabel', 'tables/fac_label_tax'));        $this->load->theme('layout');    }    public function index()    {        $actions = $this->uri->segment(3);        $table = Faclabel::Faclabel;        $field = array(            Faclabel::label_id,            Faclabel::label_name,            Faclabel::label_slug);        $getFaclabel['data'] = $this->Mod_post->select($field, $table);        $this->load->view('cateogies/label', $getFaclabel);                    if ($actions == "add") {            echo $actions;            if ($this->input->post('btnSubmit')) {                $txtLabelName = trim($this->input->post('txtLabelName'));                $txtLabelSlug = trim($this->input->post('$txtLabelSlug'));                if (!empty($txtLabelSlug)) {                    $txtLabelSlug = strtolower(str_replace(' ', '-', $txtLabelSlug));                } else {                    $txtLabelSlug = strtolower(str_replace(' ', '-', $txtLabelName));                }                $parent = trim($this->input->post('parent'));                $textAreaContent = trim($this->input->post('textAreaContent'));                /* check duplicate data*/                $where = array(Faclabel::label_slug => $txtLabelSlug);                $getpostName = $this->Mod_post->select(Faclabel::label_slug, $table, $where);                if (count($getpostName) > 0) {                    foreach ($getpostName as $rows) {                        if ($rows->label_slug == $txtLabelSlug) {                            $slug = $txtLabelSlug . '-' . strtolower($this->random(1));                        } else {                            $slug = $txtLabelSlug;                        }                    }                } else {                    $slug = $txtLabelSlug;                }                /*insert new lable */                $data = array(                    Faclabel::label_name => $txtLabelName,                    Faclabel::label_slug => $slug,                    );                $lastID = $this->mod_post->insert($table, $data);                /*for parent of categories*/                $table = fac_label_tax::fac_label_tax;                $data = array(                    fac_label_tax::label_id => $lastID,                    fac_label_tax::label_tax_parent => $parent,                    fac_label_tax::label_tax_taxonomy => 'category',                    fac_label_tax::label_tax_description => $textAreaContent,                    fac_label_tax::label_tax_count => '0');                $lastID = $this->mod_post->insert($table, $data);                redirect(base_url().'label/label', 'location');            }                    }                /*** EDIT ACION ***/        if ($actions == "eit")         {                    }                }    public function add()    {    }    public function random($length)    {        $chars = '1234567890';        $size = strlen($chars);        $str = '';        for ($i = 0; $i < $length; $i++) {            $str .= $chars[rand(0, $size - 1)];        }        return $str;    }}